# üöÄ Quick Deployment Guide - Render.com

**Deploy EverythingInBot in 15 minutes!**

---

## ‚úÖ Pre-Deployment Checklist

Before you start, have these ready:

- [ ] GitHub repo: https://github.com/anyjobhub/EverythingInBot
- [ ] Render.com account (sign up free)
- [ ] MongoDB Atlas account (sign up free)
- [ ] Telegram Bot Token (from @BotFather)
- [ ] API Keys (optional but recommended):
  - OpenAI API Key
  - Anthropic API Key
  - Google AI API Key
  - YouTube API Key

---

## üìù Step 1: MongoDB Atlas (5 minutes)

1. **Create Cluster**: [MongoDB Atlas](https://www.mongodb.com/cloud/atlas)
   - FREE M0 cluster
   - Provider: AWS
   - Region: US East (closest to Render Oregon)

2. **Database User**:
   - Username: `everythinginbot`
   - Password: Generate strong password
   - Privileges: Read and write to any database

3. **Network Access**:
   - Add IP: **0.0.0.0/0** (Allow from anywhere)

4. **Connection String**:
   ```
   mongodb+srv://everythinginbot:YOUR_PASSWORD@cluster0.xxxxx.mongodb.net/everythinginbot?retryWrites=true&w=majority
   ```
   Save this for later!

---

## ü§ñ Step 2: Telegram Bot (2 minutes)

1. Open Telegram ‚Üí Search **@BotFather**
2. Send `/newbot`
3. Name: `EverythingInBot`
4. Username: `YourBotName_bot`
5. **Save the token**: `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`

---

## üåê Step 3: Deploy to Render (8 minutes)

### 3.1 Connect Repository

1. Go to [Render Dashboard](https://dashboard.render.com/)
2. Click **"New +"** ‚Üí **"Blueprint"**
3. Connect GitHub ‚Üí Select `anyjobhub/EverythingInBot`
4. Render detects [render.yaml](file:///home/salman/Documents/Projects/EverythingInBot/render.yaml) automatically
5. Click **"Apply"**

### 3.2 Configure Environment Variables

Render creates 4 services automatically. Add these variables:

#### **everythinginbot-web** (Web Service)

**Required**:
```
TELEGRAM_BOT_TOKEN = <your_bot_token>
MONGODB_URI = <your_mongodb_connection_string>
```

**Optional** (but recommended):
```
OPENAI_API_KEY = sk-...
ANTHROPIC_API_KEY = sk-ant-...
GOOGLE_AI_API_KEY = ...
YOUTUBE_API_KEY = ...
```

**Auto-Generated** (don't touch):
```
TELEGRAM_WEBHOOK_SECRET = (auto)
REDIS_URL = (auto)
JWT_SECRET_KEY = (auto)
ENVIRONMENT = production
```

#### **everythinginbot-worker** (Celery Worker)

```
MONGODB_URI = <same as web>
YOUTUBE_API_KEY = <same as web>
```

**Auto-linked**:
```
REDIS_URL = (auto)
ENVIRONMENT = production
```

#### **everythinginbot-beat** (Celery Beat)

```
MONGODB_URI = <same as web>
YOUTUBE_API_KEY = <same as web>
```

**Auto-linked**:
```
REDIS_URL = (auto)
ENVIRONMENT = production
```

#### **everythinginbot-redis** (Redis)

No configuration needed! Auto-configured.

### 3.3 Deploy

1. Click **"Apply"** to create all services
2. Wait 5-10 minutes for build & deployment
3. All services should show **"Live"** status

---

## ‚úÖ Step 4: Verify Deployment (2 minutes)

### 4.1 Check Service Health

Visit: `https://your-service.onrender.com/health`

Expected response:
```json
{
  "status": "healthy",
  "database": "connected",
  "redis": "connected"
}
```

### 4.2 Test Bot

1. Open Telegram
2. Search for your bot
3. Send `/start`
4. You should see the main menu! üéâ

### 4.3 Verify Background Tasks

**Check Logs**:
- **Web Service**: Look for "Webhook set successfully"
- **Worker Service**: Look for "celery@... ready"
- **Beat Service**: Look for "beat: Starting..."

---

## üéØ What's Deployed

Your bot now has:

‚úÖ **4 Services Running**:
- Web Service (FastAPI + Bot)
- Celery Worker (Background tasks)
- Celery Beat (Scheduled jobs/courses fetch)
- Redis (Cache & FSM)

‚úÖ **10 Modules Active**:
- AI Chat (GPT-4o, Claude, Gemini)
- Breach Check
- Courses (auto-updated every 12h)
- Jobs (auto-updated every 6h)
- Tools, Productivity, DevTools
- Cybersecurity, OSINT, Fun

‚úÖ **Security Features**:
- Input validation
- Rate limiting (10 msg/min)
- Spam protection
- Legal disclaimers

‚úÖ **Automation**:
- Jobs: 12 sources, auto-fetch every 6 hours
- Courses: 6 platforms, auto-fetch every 12 hours
- TTL caching (24h jobs, 48h courses)

---

## üêõ Quick Troubleshooting

### Bot not responding?

**Check**:
1. Web service is "Live"?
2. `TELEGRAM_BOT_TOKEN` set correctly?
3. Webhook configured? Check logs for "Webhook set"

**Fix**: Restart web service

### Database connection failed?

**Check**:
1. MongoDB URI correct?
2. IP whitelist includes 0.0.0.0/0?
3. Password has special characters? URL-encode them!

**Fix**: Update `MONGODB_URI` in all services

### Jobs/Courses not showing?

**Reason**: First fetch hasn't run yet (takes 6-12 hours)

**Fix**: Wait for scheduled tasks, or manually trigger:
- Check beat service logs for task execution
- Jobs fetch at: 00:00, 06:00, 12:00, 18:00 UTC
- Courses fetch at: 00:00, 12:00 UTC

### Services keep sleeping?

**Reason**: Free tier sleeps after 15 min inactivity

**Fix**: 
- Upgrade to Starter plan ($7/month per service)
- Or use uptime monitor (UptimeRobot)

---

## üí∞ Cost Summary

### Free Tier (Testing)
- **Cost**: $0/month
- **Limitations**: Services sleep after 15 min
- **Good for**: Testing, development

### Starter Tier (Production)
- **Cost**: $21/month
  - Web: $7
  - Worker: $7
  - Beat: $7
  - Redis: Free
  - MongoDB: Free
- **Benefits**: No sleep, always available
- **Good for**: Up to 5,000 users

---

## üìã Post-Deployment Checklist

- [ ] All 4 services show "Live" status
- [ ] Health check returns "healthy"
- [ ] Bot responds to `/start`
- [ ] All 10 modules working
- [ ] Worker logs show "ready"
- [ ] Beat logs show scheduled tasks
- [ ] MongoDB connected
- [ ] Redis connected
- [ ] Webhook configured
- [ ] Security middlewares active

---

## üéâ You're Live!

**Your bot is now deployed and running!**

**Next Steps**:
1. Test all modules thoroughly
2. Share with beta testers
3. Monitor logs for 24 hours
4. Collect feedback
5. Iterate and improve

**Bot Link**: `https://t.me/YourBotUsername`

---

## üìö Full Documentation

For detailed instructions, troubleshooting, and advanced configuration:

üìñ **[Complete Deployment Guide](./RENDER_DEPLOYMENT.md)**

---

## üÜò Need Help?

- **Render Docs**: https://render.com/docs
- **MongoDB Docs**: https://docs.atlas.mongodb.com/
- **Telegram Bot API**: https://core.telegram.org/bots/api
- **Aiogram Docs**: https://docs.aiogram.dev/

---

*Quick Guide v1.0 - Deploy in 15 minutes!*
